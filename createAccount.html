<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Account</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<style>
body {
    background-color: #f8f9fa;
}
form {
    max-width: 600px;
    margin: 30px auto;
    padding: 25px;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}
.form-row {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
}
.form-row > div {
    flex: 1 1 45%;
}
@media (max-width: 576px) {
    .form-row > div {
        flex: 1 1 100%;
    }
}
ul {
    padding-left: 20px;
    margin-top: 5px;
}
ul li {
    font-size: 14px;
    color: red;
}
.d-flex-buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}
.d-flex-buttons button {
    flex: 1 1 45%;
}
.gender-radio {
    display: flex;
    gap: 20px;
    align-items: center;
    margin-bottom: 15px;
}
</style>
</head>
<body>

<section class="container">
    <form>
        <h2 class="text-center mb-4">Create Account</h2>

        <div class="form-row">
            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="fname" placeholder="First Name" required>
                <label for="fname">First Name</label>
            </div>
            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="lname" placeholder="Last Name" required>
                <label for="lname">Last Name</label>
            </div>
        </div>

        <div class="form-row">
            <div class="form-floating mb-3">
                <input type="number" class="form-control" id="age" placeholder="Age" required>
                <label for="age">Age</label>
            </div>
            <div class="form-floating mb-3">
                <input type="date" class="form-control" id="dob" placeholder="DOB" required>
                <label for="dob">DOB</label>
            </div>
        </div>

        <div class="form-floating mb-3">
            <input type="email" class="form-control" id="email" placeholder="Email" required>
            <label for="email">Email</label>
        </div>

        <div class="form-floating mb-2">
            <input type="password" class="form-control" id="password" placeholder="Password" onkeyup="PasswordChecker()" required>
            <label for="password">Password</label>
        </div>

        <ul class="d-flex flex-column flex-sm-row flex-wrap" style="gap:10px;">
            <li id="onecapletter">At least 1 capital letter</li>
            <li id="onesmletter">At least 1 small letter</li>
            <li id="onenumber">At least 1 number</li>
            <li id="onespecialchar">At least 1 special character</li>
            <li id="totalchar">Minimum 8 characters</li>
        </ul>

        <div class="form-floating mb-3">
            <input type="password" class="form-control" id="cpassword" placeholder="Confirm Password" required>
            <label for="cpassword">Confirm Password</label>
        </div>

        <div class="form-floating mb-3">
            <input type="tel" class="form-control" id="phonenumber" placeholder="Phone" required>
            <label for="phonenumber">Phone (+country code)</label>
        </div>

        <div class="gender-radio">
            <label>Gender:</label>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="gender" id="male" value="Male">
                <label class="form-check-label" for="male">Male</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="gender" id="female" value="Female">
                <label class="form-check-label" for="female">Female</label>
            </div>
        </div>

        <div class="d-flex-buttons">
            <button type="reset" class="btn btn-outline-danger">Cancel</button>
            <button type="submit" class="btn btn-outline-success">Submit</button>
        </div>
    </form>
</section>

<script>
function PasswordChecker() {
    let password = document.getElementById("password").value;
    let lowercase_error = document.getElementById("onesmletter");
    let uppercase_error = document.getElementById("onecapletter");
    let numbers_error = document.getElementById("onenumber");
    let special_symbol_error = document.getElementById("onespecialchar");
    let length_error = document.getElementById("totalchar");

    uppercase_error.style.color = /(?=.*[A-Z])/.test(password) ? "green" : "red";
    lowercase_error.style.color = /(?=.*[a-z])/.test(password) ? "green" : "red";
    numbers_error.style.color   = /(?=.*\d)/.test(password) ? "green" : "red";
    special_symbol_error.style.color = /(?=.*[@&#$%^&*])/.test(password) ? "green" : "red";
    length_error.style.color = /.{8,}/.test(password) ? "green" : "red";
}

document.querySelector("form").addEventListener("submit", async function(e){
    e.preventDefault();
    var gender=document.getElementsByName("gender");
    var selected;
    for(let i=0;i<gender.length;i++){
        if(gender[i].checked){
            selected=gender[i].value;
        }
    }
    try {
        const res = await axios.post("https://loginpage-backend-6jdy.onrender.com/create/account", {
            FirstName: document.getElementById("fname").value,
            LastName: document.getElementById("lname").value,
            Age: document.getElementById("age").value,
            DOB:document.getElementById("dob").value,
            Email: document.getElementById("email").value,
            Password:document.getElementById("password").value,
            ConfirmPassword:document.getElementById("cpassword").value,
            PhoneNumber: document.getElementById("phonenumber").value,
            Gender:selected
        });

        alert(res.data.message);
        document.querySelector("form").reset();
        window.location.href="./index.html"

    } catch (error) {
        alert(error.response ? error.response.data.message : error.message);
    }
});
</script>

</body>
</html>
